@import "globals";

$progress-bar-height: 1.5em; // up from 0.3em
$control-bar-border-radius: 0.5rem;
$progress-bar-border-radius: $control-bar-border-radius / 2;

$video-elem-background: rgba($header, 0.7);
$video-elem-color: color-mix(in oklab, $on-header, white 90%);

body {
  margin: 0;
}

video,
.vjs-poster {
  background-color: $on-background;
}

.video-js .vjs-control-bar {
  background: $video-elem-background !important;
  color: white !important;
  color: $video-elem-color !important;
  border-radius: $control-bar-border-radius;
  margin: 0 $control-bar-border-radius $control-bar-border-radius;
  width: auto;
}

.video-js .vjs-progress-control .vjs-progress-holder,
.video-js .vjs-progress-control:hover .vjs-progress-holder {
  // don't resize the progress bar when hovering over it
  font-size: inherit !important;
}
.video-js .vjs-progress-holder {
  // Make the hitbox for the progress bar bigger
  height: $progress-bar-height;

  border-radius: $progress-bar-border-radius;
  background: rgba($on-header, 0.1);
  overflow: hidden;
  cursor: ew-resize;

  .vjs-load-progress {
    background: rgba($on-header, 0.2);
    border-bottom-right-radius: $progress-bar-border-radius;
    border-top-right-radius: $progress-bar-border-radius;
    transition: width 1s ease-in;
    * {
      opacity: 0;
    }
  }

  .vjs-play-progress {
    background: $on-header;

    &::before { // handle of the progress bar
      content: "";
      display: block;
      width: $progress-bar-height;
      height: $progress-bar-height;
      background: $on-header;
      border-radius: $progress-bar-border-radius;
      top: 0;
      right: -$progress-bar-border-radius;
      font-size: inherit;
    }
  }
}

.video-js .vjs-title-bar-link { // title of the video
  width: auto;
  padding-left: 1em;
  padding-right: 1em;
  background: $surface;
  color: $on-surface;
  border-radius: 0.5em;

  top: 1em;
  right: 50%;
  left: auto;
  transform: translateX(50%);

  > a {
    color: $on-surface !important;
    text-decoration: none;
  }
}

.vjs-menu-button-popup .vjs-menu {
  &, .vjs-menu-content {
    background: $video-elem-background !important;
    color: white !important;
    color: $video-elem-color !important;
    border-radius: $control-bar-border-radius $control-bar-border-radius 0 0;

    * {
      background: transparent !important;
      color: white !important;
      color: $video-elem-color !important;
    }
  }

  .vjs-menu-item {
    background: transparent;
    color: $on-surface;
    box-shadow: none !important;

    &.vjs-selected {
      background: rgba($primary, 0.1);
    }

    &:hover,
    &:focus {
      background: rgba($primary, 0.2);
    }
  }
}

/* animate menu opening */
.vjs-menu-button-popup .vjs-menu {
  display: block !important;
  opacity: 0;
  transition: opacity 0.075s;
}
.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,
.vjs-workinghover .vjs-menu-button-popup:hover .vjs-menu {
  opacity: 1;
}

/* captions */
.vjs-text-track-display > div > div > div {
    background: $video-elem-background !important;
    color: white !important;
    color: $video-elem-color !important;
    border-radius: 0.2em !important;
    font-size: 75% !important;
    display: inline-block !important;
    max-width: 20em !important;
    padding: 0 1em !important;
    font-family: $font-family !important;
}
